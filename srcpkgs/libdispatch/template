pkgname=libdispatch
version=5.5.3
revision=1
create_wrksrc=yes
build_style=cmake
hostmakedepends="ninja clang git"
short_desc="Library provides comprehensive support for concurrent code execution on multicore hardware"
maintainer="Ilya <ISPonomarev@yahoo.com>"
license="Apache-2.0"
homepage="https://github.com/apple/swift-corelibs-libdispatch"

do_fetch() {
       git clone https://github.com/apple/swift-corelibs-libdispatch
       mv swift-corelibs-libdispatch ${pkgname}-${version}
}

pre_configure() {
       mkdir build
}

do_configure() {
        cd build
        cmake -G Ninja -DCMAKE_INSTALL_PREFIX:PATH=/usr -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ ..
}

libdispatch-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
	}
}
